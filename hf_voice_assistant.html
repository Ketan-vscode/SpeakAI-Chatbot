<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>SpeakAI â€” Smart Assistant</title>

<style>
  body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    font-family:Arial, sans-serif;
    color:white;
  }
  .card{
    width:90%;
    max-width:850px;
    background:rgba(0,0,0,0.35);
    padding:20px;
    border-radius:15px;
    box-shadow:0 20px 50px rgba(0,0,0,0.6);
  }
  h1{margin:0;color:#7ee7ff}
  button{
    padding:10px 15px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    margin-right:6px;
  }
  .start{background:#00e5ff}
  .stop{background:#ff5c5c}
  .small{background:#333;color:white}
  .box{
    background:rgba(0,0,0,0.3);
    padding:12px;
    border-radius:8px;
    min-height:120px;
    margin-top:8px;
  }
</style>
</head>

<body>
<div class="card">
  <h1>ğŸ™ SpeakAI â€” Smart Assistant</h1>
  <p>Ask any basic question using your voice</p>

  <button class="start" id="startBtn">ğŸ¤ Start</button>
  <button class="stop" id="stopBtn">â¹ Stop</button>
  <button class="small" id="repeatBtn">ğŸ”Š Repeat</button>

  <h3>You said:</h3>
  <div class="box" id="transcript">(nothing yet)</div>

  <h3>Answer:</h3>
  <div class="box" id="reply">Waiting for question...</div>
</div>

<script>
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
const recognition = new SpeechRecognition();

recognition.lang = "en-IN";
recognition.continuous = false;

let lastReply = "";

const transcriptEl = document.getElementById("transcript");
const replyEl = document.getElementById("reply");

function speak(text){
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = "en-IN";
  window.speechSynthesis.speak(u);
}

recognition.onresult = async (e)=>{
  const query = e.results[0][0].transcript;
  transcriptEl.innerText = query;
  replyEl.innerText = "Searching...";

  try{
    const wikiURL =
      "https://api.allorigins.win/raw?url=" +
      encodeURIComponent(
        "https://en.wikipedia.org/api/rest_v1/page/summary/" +
        query.replaceAll(" ", "_")
      );

    const res = await fetch(wikiURL);
    const text = await res.text();
    const data = JSON.parse(text);

    const answer = data.extract
      ? data.extract
      : "Sorry, I could not find an answer.";

    replyEl.innerText = answer;
    lastReply = answer;
    speak(answer);

  }catch(err){
    replyEl.innerText = "Error fetching information.";
  }
};

document.getElementById("startBtn").onclick = ()=>{
  recognition.start();
};

document.getElementById("stopBtn").onclick
